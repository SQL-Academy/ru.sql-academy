---
meta:
  title: "Оператор LIKE"
  description: "Синтаксис SQL оператор LIKE и ILIKE для поиска записей по шаблонной строке"
---

# Оператор LIKE

Оператор `LIKE` используется при условных запросах, когда мы хотим узнать, соответствует ли строка определённому шаблону.

Например, у нас есть таблица `Users`, в которой есть поле `email`:

```sql-executable-Airbnb
SELECT name, email FROM Users;
```

Допустим, мы хотим найти всех пользователей, чья почта лежит в домене второго уровня «hotmail». Т.е. нужно отобрать только те записи, что
отвечают условию:

-   после символа «@» следует «hotmail»
-   после «hotmail» следует символ «.» и далее любая последовательность символов

Для таких нетривиальных поисков по строковым полям и нужен оператор `LIKE`.

## Синтаксис

```sql
... WHERE поле_таблицы [NOT] LIKE шаблон_строки
```

Шаблон может включать следующие специальные символы:

| Символ | Описание                                                                                        |
| :----- | :---------------------------------------------------------------------------------------------- |
| `%`    | Последовательность любых символов (число символов в последовательности может быть от 0 и более) |
| `_`    | Любой единичный символ                                                                          |

Так наш запрос на поиск пользователей в домене «hotmail» может выглядеть следующим образом:

```sql-executable-Airbnb
SELECT name, email FROM Users
WHERE email LIKE '%@hotmail.%'
```

## Примеры

-   ```sql
    ... WHERE поле_таблицы LIKE 'text%'
    ```

    Сопоставляется любым строкам, начинающимся на «text»

-   ```sql
    ... WHERE поле_таблицы LIKE '%text'
    ```

    Сопоставляется любым строкам, заканчивающимся на «text»

-   ```sql
    ... WHERE поле_таблицы LIKE '_ext'
    ```

    Сопоставляется строкам, имеющим длину 4 символа, при этом 3 последних обязательно должны быть «ext». Например, слова «text» и «next»

-   ```sql
    ... WHERE поле_таблицы LIKE 'begin%end'
    ```
    Сопоставляется строкам, начинающихся на «begin» и заканчивающихся на «end»

<MySQLOnly>

> В MySQL по умолчанию шаблоны не чувствительны к регистру

</MySQLOnly>

<PostgreSQLOnly>

> В PostgreSQL шаблоны чувствительны к регистру. Для поиска без учета регистра используйте оператор `ILIKE`

</PostgreSQLOnly>

## ESCAPE-символ

ESCAPE-символ используется для экранирования специальных символов (`%` и `_`).
В случае если вам нужно найти строки, содержащие эти специальные символы как обычный текст, вы можете использовать ESCAPE-символ.

### Синтаксис с ESCAPE

```sql
... WHERE поле_таблицы LIKE 'шаблон_строки' ESCAPE 'символ_экранирования'
```

Например, вы хотите получить идентификаторы задач, прогресс которых равен 3%:

```sql
SELECT job_id FROM Jobs
WHERE progress LIKE '3!%' ESCAPE '!';
```

Если бы мы не экранировали трафаретный символ, то в выборку попало бы всё, что начинается на 3.

## Интерактивное упражнение

Теперь давайте закрепим полученные знания на практике!  
В упражнении ниже вам нужно распределить email адреса по колонкам в соответствии с заданными `LIKE` шаблонами.
