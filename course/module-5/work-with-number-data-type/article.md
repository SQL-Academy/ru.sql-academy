# Числовой тип данных в SQL

Создание числовых данных в SQL достаточно простое: можно ввести число как литерал, можно получить его из столбца таблицы или
сгенерировать его путём вычислений.

При вычислениях можно использовать все стандартные арифметические операции (`+`, `-`, `*`, `/` и прочие) и изменять приоритеты вычислений с помощью скобок.

```sql
SELECT 2 * ((22 - 16) / (2 + 1)) AS calc_example;
```

| calc_example |
| ------------ |
| 4            |

## Математические функции

Для большинства математических вычислений, таких как получение степени числа или получение квадратного корня, в SQL
есть встроенные числовые функции. Вот некоторые примеры данных функций:

| Имя функции                                                                          | Описание                                         |
| :----------------------------------------------------------------------------------- | ------------------------------------------------ |
| <a href="https://sql-academy.org/handbook/POW" target="_blank">`POW(num, power)`</a> | Вычисляет число в указанной степени              |
| <a href="https://sql-academy.org/handbook/SQRT" target="_blank">`SQRT(num)`</a>      | Вычисляет квадратный корень числа                |
| <a href="https://sql-academy.org/handbook/LOG" target="_blank">`LOG(base, num)`</a>  | Вычисляет логарифм числа по указанному основанию |
| <a href="https://sql-academy.org/handbook/EXP" target="_blank">`EXP(num)`</a>        | Вычисляет e<sup>num</sup>                        |
| <a href="https://sql-academy.org/handbook/SIN" target="_blank">`SIN(num)`</a>        | Вычисляет синус числа                            |
| <a href="https://sql-academy.org/handbook/COS" target="_blank">`COS(num)`</a>        | Вычисляет косинус числа                          |
| <a href="https://sql-academy.org/handbook/TAN" target="_blank">`TAN(num)`</a>        | Вычисляет тангенс числа                          |

Список всех числовых функций, их описание и примеры можно посмотреть в <a href="https://sql-academy.org/handbook/CEILING" target="_blank">справочнике</a>.

## Округление чисел

При работе с числами с плавающей точкой не всегда требуется сохранение или отображение чисел с полной точностью.
Так, денежные транзакции можно хранить с точностью до 6 знаков после запятой, а отображать до 2, с точностью до копеек.

Для округления числовых данных в SQL предусмотрены следующие 4 функции: `CEIL`, `FLOOR`, `ROUND`,
`TRUNCATE`.

Функции `CEIL`, `FLOOR` направлены на то, чтобы округлять число к ближайшему целому числу в большую и в меньшую сторону соответственно.

```sql
SELECT CEILING(69.69) AS ceiling, FLOOR(69.69) AS floor;
```

| ceiling | floor |
| ------- | ----- |
| 70      | 69    |

Для округления к ближайшему целому числу есть функция `ROUND`, которая любое число, десятичная часть которого больше или равна 0.5, округляет в большую
сторону, иначе в меньшую.

```sql
SELECT ROUND(69.499), ROUND(69.5), ROUND(69.501);
```

| ROUND(69.499) | ROUND(69.5) | ROUND(69.501) |
| ------------- | ----------- | ------------- |
| 69            | 70          | 70            |

Функция `ROUND` также позволяет округлять число до некоторой части десятичных знаков после запятой.
Для этого функция принимает второй необязательный аргумент с указанием количества знаков после запятой, которые требуется оставить.

```sql
SELECT ROUND(69.7171,1), ROUND(69.7171,2), ROUND(69.7171,3);
```

| ROUND(69.7171,1) | ROUND(69.7171,2) | ROUND(69.7171,3) |
| ---------------- | ---------------- | ---------------- |
| 69.7             | 69.72            | 69.717           |

Второй аргумент функции `ROUND` может принимать также и отрицательные значения.
В этом случает, цифры слева от десятичной точки числа становятся равными нулю на указанное в аргументе количество, а дробная часть обрезается.

```sql
SELECT ROUND(1691.7,-1), ROUND(1691.7,-2), ROUND(1691.7,-3);
```

| ROUND(1691.7,-1) | ROUND(1691.7,-2) | ROUND(1691.7,-3) |
| ---------------- | ---------------- | ---------------- |
| 1690             | 1700             | 2000             |

Функция `TRUNCATE` аналогична функции `ROUND`, она также способна принимать 2-й необязательный параметр, только вместо округления она просто
отбрасывает ненужные цифры.

```sql
SELECT TRUNCATE(69.7979,1), TRUNCATE(69.7979,2), TRUNCATE(69.7979,3);
```

| TRUNCATE(69.7979,1) | TRUNCATE(69.7979,2) | TRUNCATE(69.7979,3) |
| ------------------- | ------------------- | ------------------- |
| 69.7                | 69.79               | 69.797              |

А что вернёт следующее выражение?

```sql
SELECT TRUNCATE(69.7979, -1);
```

## Работа со знаковыми числами

При работе с числовыми данными, в которых возможно наличие отрицательных значений, могут быть полезными функции `SIGN` и `ABS`.

Функция `SIGN` возвращает значение `-1`, если число отрицательно, `0`, если число нулевое и `1`, если число положительное.

```sql
SELECT SIGN(-69), SIGN(0), SIGN(69);
```

| SIGN(-69) | SIGN(0) | SIGN(69) |
| --------- | ------- | -------- |
| -1        | 0       | 1        |

Функция `ABS` возвращает абсолютное значение числа.

```sql
SELECT ABS(-69), ABS(0), ABS(69);
```

| ABS(-69) | ABS(0) | ABS(69) |
| -------- | ------ | ------- |
| 69       | 0      | 69      |
