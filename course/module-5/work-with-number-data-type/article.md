---
meta:
  title: "Числовой тип данных в SQL: математические функции, округление, ROUND, TRUNCATE"
  description: "Работа с числами в SQL: математические функции ROUND, TRUNCATE, CEILING, FLOOR, ABS, SIGN. Округление чисел, управление точностью в MySQL и PostgreSQL."
---

# Числовой тип данных в SQL

Создание числовых данных в SQL достаточно простое: можно ввести число как литерал, можно получить его из столбца таблицы или
сгенерировать его путём вычислений.

При вычислениях можно использовать все стандартные арифметические операции (`+`, `-`, `*`, `/` и прочие) и изменять приоритеты вычислений с помощью скобок.

```sql-executable
SELECT 2 * ((22 - 16) / (2 + 1)) AS calc_example;
```

## Математические функции

Для большинства математических вычислений, таких как получение степени числа или получение квадратного корня, в SQL
есть встроенные числовые функции. Вот некоторые примеры данных функций:

<MySQLOnly>

| Имя функции                                                         | Описание                                         |
| :------------------------------------------------------------------ | ------------------------------------------------ |
| <a href="/handbook/mysql/pow" target="_blank">`POW(num, power)`</a> | Вычисляет число в указанной степени              |
| <a href="/handbook/mysql/sqrt" target="_blank">`SQRT(num)`</a>      | Вычисляет квадратный корень числа                |
| <a href="/handbook/mysql/log" target="_blank">`LOG(base, num)`</a>  | Вычисляет логарифм числа по указанному основанию |
| <a href="/handbook/mysql/exp" target="_blank">`EXP(num)`</a>        | Вычисляет e<sup>num</sup>                        |
| <a href="/handbook/mysql/sin" target="_blank">`SIN(num)`</a>        | Вычисляет синус числа                            |
| <a href="/handbook/mysql/cos" target="_blank">`COS(num)`</a>        | Вычисляет косинус числа                          |
| <a href="/handbook/mysql/tan" target="_blank">`TAN(num)`</a>        | Вычисляет тангенс числа                          |

Список всех числовых функций, их описание и примеры можно посмотреть в <a href="/handbook/mysql/ceiling" target="_blank">справочнике</a>.

</MySQLOnly>

<PostgreSQLOnly>

| Имя функции                                                                  | Описание                                         |
| :--------------------------------------------------------------------------- | ------------------------------------------------ |
| <a href="/handbook/postgresql/power" target="_blank">`POWER(num, power)`</a> | Вычисляет число в указанной степени              |
| <a href="/handbook/postgresql/sqrt" target="_blank">`SQRT(num)`</a>          | Вычисляет квадратный корень числа                |
| <a href="/handbook/postgresql/log" target="_blank">`LOG(base, num)`</a>      | Вычисляет логарифм числа по указанному основанию |
| <a href="/handbook/postgresql/exp" target="_blank">`EXP(num)`</a>            | Вычисляет e<sup>num</sup>                        |
| <a href="/handbook/postgresql/sin" target="_blank">`SIN(num)`</a>            | Вычисляет синус числа                            |
| <a href="/handbook/postgresql/cos" target="_blank">`COS(num)`</a>            | Вычисляет косинус числа                          |
| <a href="/handbook/postgresql/tan" target="_blank">`TAN(num)`</a>            | Вычисляет тангенс числа                          |

Список всех числовых функций, их описание и примеры можно посмотреть в <a href="/handbook/postgresql/ceil" target="_blank">справочнике</a>.

</PostgreSQLOnly>

## Округление чисел

При работе с числами с плавающей точкой не всегда требуется сохранение или отображение чисел с полной точностью.
Так, денежные транзакции можно хранить с точностью до 6 знаков после запятой, а отображать до 2, с точностью до копеек.

<MySQLOnly>

Для округления числовых данных в SQL предусмотрены следующие 4 функции: `CEIL`, `FLOOR`, `ROUND`,
`TRUNCATE`.

Функции `CEIL`, `FLOOR` направлены на то, чтобы округлять число к ближайшему целому числу в большую и в меньшую сторону соответственно.

```sql-executable
SELECT CEILING(69.69) AS ceiling, FLOOR(69.69) AS floor;
```

</MySQLOnly>

<PostgreSQLOnly>

Для округления числовых данных в SQL предусмотрены следующие 4 функции: `CEIL`, `FLOOR`, `ROUND`,
`TRUNC`.

Функции `CEIL`, `FLOOR` направлены на то, чтобы округлять число к ближайшему целому числу в большую и в меньшую сторону соответственно.

```sql-executable
SELECT CEIL(69.69) AS ceiling, FLOOR(69.69) AS floor;
```

</PostgreSQLOnly>

Для округления к ближайшему целому числу есть функция `ROUND`, которая любое число, десятичная часть которого больше или равна 0.5, округляет в большую
сторону, иначе в меньшую.

```sql-executable
SELECT ROUND(69.499), ROUND(69.5), ROUND(69.501);
```

Функция `ROUND` также позволяет округлять число до некоторой части десятичных знаков после запятой.
Для этого функция принимает второй необязательный аргумент с указанием количества знаков после запятой, которые требуется оставить.

```sql-executable
SELECT ROUND(69.7171,1), ROUND(69.7171,2), ROUND(69.7171,3);
```

Второй аргумент функции `ROUND` может принимать также и отрицательные значения.
В этом случае, цифры слева от десятичной точки числа становятся равными нулю на указанное в аргументе количество, а дробная часть обрезается.

```sql-executable
SELECT ROUND(1691.7,-1), ROUND(1691.7,-2), ROUND(1691.7,-3);
```

<MySQLOnly>

Функция `TRUNCATE` аналогична функции `ROUND`, она также способна принимать 2-й необязательный параметр, только вместо округления она просто
отбрасывает ненужные цифры.

```sql-executable
SELECT TRUNCATE(69.7979,1), TRUNCATE(69.7979,2), TRUNCATE(69.7979,3);
```

А что вернёт следующее выражение?

```sql-executable
SELECT TRUNCATE(69.7979, -1);
```

</MySQLOnly>

<PostgreSQLOnly>

Функция `TRUNC` аналогична функции `ROUND`, она также способна принимать 2-й необязательный параметр, только вместо округления она просто
отбрасывает ненужные цифры.

```sql-executable
SELECT TRUNC(69.7979,1), TRUNC(69.7979,2), TRUNC(69.7979,3);
```

А что вернёт следующее выражение?

```sql-executable
SELECT TRUNC(69.7979, -1);
```

</PostgreSQLOnly>

## Работа со знаковыми числами

При работе с числовыми данными, в которых возможно наличие отрицательных значений, могут быть полезными функции `SIGN` и `ABS`.

Функция `SIGN` возвращает значение `-1`, если число отрицательно, `0`, если число нулевое и `1`, если число положительное.

```sql-executable
SELECT SIGN(-69), SIGN(0), SIGN(69);
```

Функция `ABS` возвращает абсолютное значение числа.

```sql-executable
SELECT ABS(-69), ABS(0), ABS(69);
```
