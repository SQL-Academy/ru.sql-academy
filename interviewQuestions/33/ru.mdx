---
meta:
    title: 'Что такое коррелированный подзапрос?'
    description: 'Коррелированный подзапрос в SQL выполняется для каждой строки внешнего запроса, используя её значения. Узнайте, как и когда применять коррелированные подзапросы.'
---

> **Коррелированный подзапрос** — это подзапрос, который зависит от внешнего запроса.
> Он выполняется для каждой строки внешнего запроса, используя значения из этой строки.

## Особенности

-   Подзапрос ссылается на столбцы из внешнего запроса.
-   Может быть менее эффективным из-за множественного выполнения.

## Пример

Есть таблица `employees` и `departments`.

```sql
SELECT e.name, e.salary
FROM employees e
WHERE e.salary > (
    SELECT AVG(salary)
    FROM employees
    WHERE department_id = e.department_id
);
```

-   Здесь подзапрос вычисляет среднюю зарплату для отдела каждого сотрудника
-   Основной запрос выбирает сотрудников, чья зарплата выше средней по отделу

Больше информации о коррелированных подзапросах <a href="https://sql-academy.org/ru/guide/correlated-subqueries" target="_blank">в нашем курсе</a>.
