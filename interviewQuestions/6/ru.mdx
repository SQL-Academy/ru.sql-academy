---
meta:
    title: 'Что такое подзапрос (subquery) и когда он используется?'
    description: 'Подзапрос (subquery) в SQL — это вложенный запрос, используемый для фильтрации данных, выборки или создания виртуальных таблиц. Узнайте, когда и как его применять.'
---

> Подзапрос — это SQL-запрос, вложенный внутри другого запроса. Он используется для выполнения операций, результат которых необходим для основного запроса.

## Случаи использования подзапросов:

-   **Фильтрация данных**: Использование результатов подзапроса в условиях `WHERE` или `HAVING`.
-   **Выборка данных**: Использование подзапроса в списке выбранных столбцов.
-   **Создание виртуальных таблиц**: Использование подзапроса в операторе `FROM`.

## Примеры:

1. Подзапрос в `WHERE`:

```sql
SELECT name
FROM employees
WHERE department_id = (SELECT id FROM departments WHERE name = 'IT');
```

2. Подзапрос в `FROM`:

```sql
SELECT sub.department, COUNT(*)
FROM (
    SELECT department_id AS department
    FROM employees
) sub
GROUP BY sub.department;
```
